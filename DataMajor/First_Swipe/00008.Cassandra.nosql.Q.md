# Mock Interview â€” Cassandra

Same rules â€” answer in the room, model answer and diagrams after each response.

---

## Question 1 â€” Warm Up

**"Can you explain what Apache Cassandra is, what problem it was designed to solve, and how its architecture differs fundamentally from both a relational database and MongoDB?"**  

# Feedback First

---

## What You Nailed âœ…

**Facebook origin story** â€” correctly placed and correctly motivated. Write-heavy, billions of messages, no downtime. Perfect framing.

**"No single point of failure"** â€” leading with this shows you understand Cassandra's core architectural philosophy immediately.

**Masterless architecture** â€” correctly identified that every node can accept reads and writes. This is the fundamental distinction from both relational and MongoDB.

**Consistent hashing** â€” mentioning this specifically shows technical depth. Most candidates say "it distributes data" without knowing the mechanism.

**Tunable consistency** â€” correctly identified and correctly contrasted with MongoDB's default strong consistency. This is a critical Cassandra differentiator.

**Linear scaling** â€” correctly described. Add nodes, get proportional capacity. No resharding complexity like MongoDB.

**The closing bottom line** â€” "it must keep accepting writes at crazy speed forever, even if half the servers die" is the single best one-liner description of when to choose Cassandra. Memorable and precise.

**Wide-column distinction** â€” correctly identified Cassandra as wide-column rather than document store. Shows you know the NoSQL taxonomy.

---

## What to Tighten Up ğŸ”§

**Missing the CAP theorem framing.** You described eventual consistency correctly but didn't use the CAP theorem vocabulary which interviewers specifically listen for:

*"Cassandra is an AP system â€” it prioritizes Availability and Partition Tolerance over Consistency in the CAP theorem. During a network partition Cassandra continues accepting writes on all available nodes, accepting temporary inconsistency. MongoDB is a CP system â€” it prioritizes Consistency, refusing writes during a partition rather than risking inconsistency."*

**Missing the ring architecture specifically.** You mentioned consistent hashing but didn't describe the ring which is Cassandra's iconic architectural image:

*"Cassandra organizes nodes in a logical ring. Each node owns a range of the hash space. When data arrives, Cassandra hashes the partition key and routes it to the node responsible for that range. With replication factor 3, the data is also copied to the next two nodes clockwise around the ring â€” no election needed, no leader, just automatic peer replication."*

**Missing the write path explanation.** This is what makes Cassandra's write speed possible and interviewers love hearing it:

*"Cassandra's extreme write throughput comes from its write path â€” writes go to an in-memory MemTable and a sequential Commit Log simultaneously. Both are sequential operations â€” no random disk seeks. When the MemTable fills it flushes to an immutable SSTable on disk. This is fundamentally different from relational databases that do random disk writes for every update."*

**"Wide-column like super-flexible spreadsheets"** â€” this analogy is slightly off. A cleaner framing:

*"Wide-column means rows can have different columns, and columns are grouped and sorted within a row. Think of it as a map of sorted maps â€” the outer key is the partition key, the inner sorted structure is the clustering columns. This physical layout is what makes time-series queries â€” give me all transactions for customer C001 ordered by time â€” blindingly fast."*

---

# Model Answer

---

*"Apache Cassandra is a distributed wide-column NoSQL database built for one specific purpose â€” extreme write throughput and continuous availability across a globally distributed cluster with no single point of failure.*

**The Problem it Solved:**

*Facebook built Cassandra in 2008 to power their inbox search feature â€” storing hundreds of billions of messages across hundreds of millions of users with writes arriving every millisecond from data centers worldwide. The requirement was brutal â€” writes must never slow down, the system must never go down, and it must scale to any volume by simply adding commodity servers. No database at the time could meet all three requirements simultaneously.*

*Relational databases failed on scale â€” vertical scaling hits a physical and economic ceiling and horizontal scaling with traditional replication creates write bottlenecks at the primary node. MongoDB was closer but its primary/secondary model still had a write bottleneck â€” all writes go to the primary. Cassandra eliminated the bottleneck entirely by making every node equal.*

**How Cassandra's Architecture Differs from Relational:**

*Relational databases are built around the ACID transaction model â€” strict consistency, complex joins, normalized schemas. They scale vertically and struggle to distribute writes across many nodes because maintaining consistency across a distributed system requires coordination â€” and coordination creates latency and bottlenecks.*

*Cassandra makes a deliberate tradeoff in the CAP theorem. It is an AP system â€” Availability and Partition Tolerance over Consistency. During a network partition Cassandra continues accepting writes and reads on every available node, accepting that data might be temporarily inconsistent between nodes. A relational database is a CP system â€” it refuses writes during a partition rather than risk inconsistency. For audit logs and event streams, temporary inconsistency is acceptable. For account balances it isn't â€” which is why Capital One uses both.*

**How Cassandra's Architecture Differs from MongoDB:**

*MongoDB is a CP document store with a primary/secondary replica set model. Writes go to one primary node per replica set. If that primary goes down, an election happens and a new primary is chosen â€” typically 10 to 30 seconds of write unavailability. With sharding you have multiple primary nodes but each shard still has one write bottleneck.*

*Cassandra has no primaries anywhere. It is a masterless peer-to-peer system. Every node is equal. Every node can accept any read or write. The data distribution mechanism is consistent hashing â€” Cassandra hashes the partition key and maps the result to a position on a logical ring. Each node owns a segment of that ring. Data is automatically routed to the correct node based on its hash. With replication factor 3, data is also copied to the next two nodes clockwise on the ring â€” no election, no leader, just automatic peer replication.*

*This masterless ring architecture is why Cassandra never goes down. There is no single thing to fail. You can take down a third of the nodes in a Cassandra cluster and the system continues operating without interruption, without data loss, and without any manual intervention.*

**Why Cassandra's Writes are So Fast:**

*Cassandra's extreme write throughput â€” millions of writes per second â€” comes from its write path architecture. When a write arrives it goes to two places simultaneously â€” an in-memory structure called a MemTable for fast access, and a sequential Commit Log on disk for durability. Both operations are sequential â€” no random disk seeks. Sequential writes are an order of magnitude faster than random writes.*

*When the MemTable fills up, Cassandra flushes it to disk as an immutable file called an SSTable â€” Sorted String Table. SSTables are never modified. Compaction runs periodically in the background, merging SSTables and organizing data. The result is a write path that is almost entirely sequential I/O â€” the fastest possible way to write to disk.*

**The One-Line Summary:**

*Choose Cassandra when the requirement is â€” the system must keep accepting writes at extreme speed forever, even if servers fail, even across multiple data centers, with consistent single-digit millisecond latency at any scale. That is Cassandra's singular superpower and the reason Capital One uses it for transaction logging, audit trails, and real-time feature stores."*

---

# Architecture Diagrams

```
THE CAP THEOREM â€” WHERE CASSANDRA SITS
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                       â•‘
â•‘                        CONSISTENCY                                    â•‘
â•‘                             â–³                                        â•‘
â•‘                             â”‚                                        â•‘
â•‘                             â”‚                                        â•‘
â•‘                    CP       â”‚       CA                               â•‘
â•‘               (MongoDB)     â”‚   (Traditional                         â•‘
â•‘                             â”‚    Relational)                         â•‘
â•‘                             â”‚                                        â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â•‘
â•‘                             â”‚                                        â•‘
â•‘                    AP       â”‚                                        â•‘
â•‘                (Cassandra)  â”‚                                        â•‘
â•‘                             â”‚                                        â•‘
â•‘   AVAILABILITY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PARTITION              â•‘
â•‘                             â”‚               TOLERANCE                â•‘
â•‘                                                                       â•‘
â•‘   All distributed systems MUST have Partition Tolerance              â•‘
â•‘   Real choice is Consistency vs Availability                         â•‘
â•‘                                                                       â•‘
â•‘   MongoDB:    CP â€” refuses writes during partition                   â•‘
â•‘               never risks inconsistency                              â•‘
â•‘                                                                       â•‘
â•‘   Cassandra:  AP â€” keeps accepting writes during partition           â•‘
â•‘               accepts temporary inconsistency                        â•‘
â•‘                                                                       â•‘
â•‘   Use MongoDB for:    Account balances (must be accurate)            â•‘
â•‘   Use Cassandra for:  Audit logs (must never stop writing)           â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


CASSANDRA RING ARCHITECTURE
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                       â•‘
â•‘                         NODE 1                                       â•‘
â•‘                      (hash 0-20)                                     â•‘
â•‘                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â•‘
â•‘                   /             \                                    â•‘
â•‘    NODE 6        /               \        NODE 2                    â•‘
â•‘  (hash 80-99)   /                 \     (hash 20-40)                â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  /                   \  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â•‘
â•‘  â”‚          â”‚ /     CASSANDRA       \ â”‚          â”‚                  â•‘
â•‘  â”‚  Every   â”‚       RING             â”‚  Every   â”‚                  â•‘
â•‘  â”‚  node    â”‚\                      /â”‚  node    â”‚                  â•‘
â•‘  â”‚  equal   â”‚ \                    / â”‚  equal   â”‚                  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  \                  /  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â•‘
â•‘    NODE 5       \                /       NODE 3                    â•‘
â•‘  (hash 60-80)    \              /      (hash 40-60)                â•‘
â•‘                   \            /                                    â•‘
â•‘                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â•‘
â•‘                       NODE 4                                        â•‘
â•‘                    (hash 60-80)                                     â•‘
â•‘                                                                       â•‘
â•‘  Write arrives: customer_id = "C001"                                 â•‘
â•‘  Hash("C001") = 34  â†’  routed to NODE 2                             â•‘
â•‘  Replication factor 3 â†’ also copied to NODE 3 and NODE 4            â•‘
â•‘                                                                       â•‘
â•‘  NODE 2 goes down:                                                   â•‘
â•‘  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â•‘
â•‘  No election needed âœ…                                               â•‘
â•‘  NODE 3 and NODE 4 already have copies âœ…                            â•‘
â•‘  Reads/writes continue immediately âœ…                                â•‘
â•‘  Zero downtime âœ…                                                    â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


CASSANDRA VS MONGODB VS RELATIONAL
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                       â•‘
â•‘                  RELATIONAL      MONGODB        CASSANDRA            â•‘
â•‘                  â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€â”€â”€            â•‘
â•‘  Architecture    Single          Primary/       Masterless           â•‘
â•‘                  primary or      Secondary      peer ring            â•‘
â•‘                  complex         replica set                         â•‘
â•‘                  replication                                         â•‘
â•‘                                                                       â•‘
â•‘  Write path      Random          Journaled      Sequential           â•‘
â•‘                  disk I/O        B-tree         MemTable +           â•‘
â•‘                                  updates        SSTable              â•‘
â•‘                                                                       â•‘
â•‘  Write speed     Moderate        Very fast      Extreme              â•‘
â•‘                                                 (millions/sec)       â•‘
â•‘                                                                       â•‘
â•‘  Consistency     Strong          Strong         Tunable              â•‘
â•‘  model           (ACID)          (CP)           (AP default)         â•‘
â•‘                                                                       â•‘
â•‘  Failure         Primary         Election       Instant â€”            â•‘
â•‘  handling        failover        10-30 sec      no downtime          â•‘
â•‘                  required        delay          ever                 â•‘
â•‘                                                                       â•‘
â•‘  Query           SQL â€” any       MQL â€” any      CQL â€” partition      â•‘
â•‘  flexibility     field           field          key required         â•‘
â•‘                                                                       â•‘
â•‘  Best for        Complex         Rich docs      Time-series          â•‘
â•‘                  queries         varied         write-heavy          â•‘
â•‘                  ACID txns       schemas        event logs           â•‘
â•‘                                                                       â•‘
â•‘  Capital One     Core account    Customer       Transaction          â•‘
â•‘  use case        ledger          profiles       audit log            â•‘
â•‘                  regulatory      fraud cases    feature store        â•‘
â•‘                  reporting       enrichment     event history        â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


CASSANDRA WRITE PATH â€” WHY IT'S SO FAST
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                       â•‘
â•‘  WRITE ARRIVES                                                        â•‘
â•‘       â”‚                                                               â•‘
â•‘       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â•‘
â•‘       â–¼                                         â–¼                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â•‘
â•‘  â”‚  MemTable   â”‚                        â”‚  Commit Log   â”‚            â•‘
â•‘  â”‚  (In RAM)   â”‚                        â”‚  (Disk â€”      â”‚            â•‘
â•‘  â”‚             â”‚                        â”‚   sequential) â”‚            â•‘
â•‘  â”‚  Super fast â”‚                        â”‚               â”‚            â•‘
â•‘  â”‚  write âœ…   â”‚                        â”‚  Durability âœ… â”‚            â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â•‘
â•‘         â”‚                                                             â•‘
â•‘         â”‚ MemTable full                                               â•‘
â•‘         â–¼                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â•‘
â•‘  â”‚  SSTable    â”‚  â—„â”€â”€ Immutable, sorted, compressed                  â•‘
â•‘  â”‚  (Disk â€”    â”‚      Written sequentially âœ…                        â•‘
â•‘  â”‚   flush)    â”‚      Never modified âœ…                              â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                                      â•‘
â•‘         â”‚                                                             â•‘
â•‘         â”‚ Periodically                                                â•‘
â•‘         â–¼                                                             â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                      â•‘
â•‘  â”‚ Compaction  â”‚  â—„â”€â”€ Merges SSTables                                â•‘
â•‘  â”‚ (Background)â”‚      Removes tombstones                             â•‘
â•‘  â”‚             â”‚      Organizes for reads                            â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                      â•‘
â•‘                                                                       â•‘
â•‘  RELATIONAL WRITE PATH (comparison):                                  â•‘
â•‘  Random disk seek â†’ find page â†’ update in place â†’ write log          â•‘
â•‘  Random I/O = 100x slower than sequential âŒ                         â•‘
â•‘                                                                       â•‘
â•‘  CASSANDRA WRITE PATH:                                                â•‘
â•‘  Append to MemTable (RAM) + Append to Commit Log (sequential disk)   â•‘
â•‘  Sequential I/O = maximum disk throughput âœ…                         â•‘
â•‘                                                                       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```
---
---
---

## Question 2 â€” Stepping Up

**"Explain Cassandra's data model â€” keyspaces, tables, partition keys, clustering keys, and how they work together. Then explain tunable consistency â€” what it is, what the consistency levels mean, and how you would choose the right level for different Capital One use cases."**

